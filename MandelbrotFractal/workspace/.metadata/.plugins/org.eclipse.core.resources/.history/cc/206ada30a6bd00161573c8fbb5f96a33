//============================================================================
// Name        : InputScreenSDL.cpp
// Author      : 
// Version     :
// Copyright   : Your copyright notice
// Description : Hello World in C++, Ansi-style
//============================================================================

#include <iostream>
#include "Screen.h"
#include <complex>
#include <vector>


using namespace std;

int main() {

	int width = 800;
	int height = 600;


	// Initialise screen
	Screen screen(width, height);
	if (screen.init() == false) {
		cout << "ERROR INITIALIZING SCREEN WITH SDL." << endl;
	}
	cout << "SDL Init succeeded." << endl;


	int max = 1000;
	double scale = 1.0;
	while (true) {

		for (int y = 0; y < height; y++) {
			for (int x = 0; x < width; x++) {

				double c_re = (y - width/2.0)*4.0/width;
				double c_im = (x - height/2.0)*4.0/width;
				double xx = 0;
				double yy = 0;
				int iteration = 0;

				while ( (xx*xx+yy*yy <= 4.0 ) && iteration < max) {

					double x_new = xx*xx - yy*yy + c_re;
					yy = 2*xx*yy + c_im;
					xx = x_new;
					iteration++;
				}

//				std::complex<double> c ( scale * ( x - (width - height) / 2) / height * 4.0 - 2.0, scale * y / height * 4.0 - 2.0);
//				std::complex<double> z (0.0, 0.0);
//
//				int iteration = 0;
//				while (iteration < max){
//					z = z * z + c;
//
//					if(abs(z) > 2.0)
//						break;
//
//					++iteration;
//				}


				if (iteration < max){
					screen.setPixel(x, y, iteration, iteration, iteration);
				} else {
					screen.setPixel(x, y, 0, 0, 0);
				}

			}
		}

		// Draw the screen
		screen.update();

		// Check for messages/events
		if(screen.proccessEvents() == false){
			break;
		}

	}

	screen.close();



	return 0;
}
